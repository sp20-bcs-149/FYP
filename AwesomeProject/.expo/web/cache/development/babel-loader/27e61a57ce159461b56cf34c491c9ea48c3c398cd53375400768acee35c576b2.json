{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport GenericService from \"../services/GenericServices\";\nimport jwtDecode from \"jwt-decode\";\nimport * as SecureStore from 'expo-secure-store';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport myURL from \"./myurls\";\nvar UserService = function (_GenericService) {\n  _inherits(UserService, _GenericService);\n  var _super = _createSuper(UserService);\n  function UserService() {\n    var _this;\n    _classCallCheck(this, UserService);\n    _this = _super.call(this);\n    _this.login = function (email, password) {\n      return new Promise(function (resolve, reject) {\n        _this.post(myURL + \"/login\", {\n          email: email,\n          password: password\n        }).then(function () {\n          var _ref = _asyncToGenerator(function* (token) {\n            try {\n              yield AsyncStorage.setItem('token', token);\n              console.log('Token stored in AsyncStorage.');\n            } catch (error) {\n              console.error('Error storing token:', error);\n            }\n            resolve(token);\n          });\n          return function (_x) {\n            return _ref.apply(this, arguments);\n          };\n        }()).catch(function (err) {\n          reject(err);\n        });\n      });\n    };\n    _this.logout = function () {};\n    _this.getLoggedInUser = _asyncToGenerator(function* () {\n      try {\n        var storedToken = yield AsyncStorage.getItem('token');\n        console.log('Retrieved token:', storedToken);\n        return jwtDecode(storedToken);\n      } catch (error) {\n        console.error('Error retrieving token:', error);\n        return null;\n      }\n    });\n    _this.register = function (name, email, password, role) {\n      return _this.post(myURL + \"/signup\", {\n        name: name,\n        email: email,\n        password: password,\n        role: role\n      });\n    };\n    return _this;\n  }\n  return _createClass(UserService);\n}(GenericService);\nvar userService = new UserService();\nexport default userService;","map":{"version":3,"names":["GenericService","jwtDecode","SecureStore","AsyncStorage","myURL","UserService","_GenericService","_inherits","_super","_createSuper","_this","_classCallCheck","call","login","email","password","Promise","resolve","reject","post","then","_ref","_asyncToGenerator","token","setItem","console","log","error","_x","apply","arguments","catch","err","logout","getLoggedInUser","storedToken","getItem","register","name","role","_createClass","userService"],"sources":["E:/4 -ReactNative/Final-Year-Project/FYP3/AwesomeProject/services/userservices.js"],"sourcesContent":["import GenericService from \"../services/GenericServices\";\r\nimport jwtDecode from \"jwt-decode\";\r\nimport * as SecureStore from 'expo-secure-store';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\nimport myURL from \"./myurls\";\r\n\r\nclass UserService extends GenericService{\r\n    constructor() {\r\n        super();   \r\n    }\r\n\r\n    login =  (email,password) => new Promise((resolve,reject)=>{\r\n        this.post( myURL+\"/login\",{email,password})\r\n        .then(async token=>{\r\n            try {\r\n                await AsyncStorage.setItem('token', token);\r\n                console.log('Token stored in AsyncStorage.');\r\n            } catch (error) {\r\n                console.error('Error storing token:', error);\r\n            }\r\n            resolve(token);\r\n        })\r\n        .catch((err)=>{\r\n            reject(err);\r\n        })\r\n    })\r\n\r\n    logout = () => {\r\n        // localStorage.removeItem(\"token\");\r\n    };\r\n\r\n    getLoggedInUser = async ()=>{\r\n        try {\r\n            const storedToken = await AsyncStorage.getItem('token');\r\n            console.log('Retrieved token:', storedToken);\r\n            return jwtDecode(storedToken);\r\n        } catch (error) {\r\n            console.error('Error retrieving token:', error);\r\n            return null;\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    register = (name,email,password,role) => \r\n        this.post(myURL+\"/signup\",{name,email,password,role});\r\n}\r\n\r\n\r\n\r\nlet userService = new UserService();\r\nexport default userService;"],"mappings":";;;;;;;;AAAA,OAAOA,cAAc;AACrB,OAAOC,SAAS,MAAM,YAAY;AAClC,OAAO,KAAKC,WAAW,MAAM,mBAAmB;AAChD,OAAOC,YAAY,MAAM,2CAA2C;AAEpE,OAAOC,KAAK;AAAiB,IAEvBC,WAAW,aAAAC,eAAA;EAAAC,SAAA,CAAAF,WAAA,EAAAC,eAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,WAAA;EACb,SAAAA,YAAA,EAAc;IAAA,IAAAK,KAAA;IAAAC,eAAA,OAAAN,WAAA;IACVK,KAAA,GAAAF,MAAA,CAAAI,IAAA;IAAQF,KAAA,CAGZG,KAAK,GAAI,UAACC,KAAK,EAACC,QAAQ;MAAA,OAAK,IAAIC,OAAO,CAAC,UAACC,OAAO,EAACC,MAAM,EAAG;QACvDR,KAAA,CAAKS,IAAI,CAAEf,KAAK,GAAC,QAAQ,EAAC;UAACU,KAAK,EAALA,KAAK;UAACC,QAAQ,EAARA;QAAQ,CAAC,CAAC,CAC1CK,IAAI;UAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAC,WAAMC,KAAK,EAAE;YACf,IAAI;cACA,MAAMpB,YAAY,CAACqB,OAAO,CAAC,OAAO,EAAED,KAAK,CAAC;cAC1CE,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;YAChD,CAAC,CAAC,OAAOC,KAAK,EAAE;cACZF,OAAO,CAACE,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;YAChD;YACAV,OAAO,CAACM,KAAK,CAAC;UAClB,CAAC;UAAA,iBAAAK,EAAA;YAAA,OAAAP,IAAA,CAAAQ,KAAA,OAAAC,SAAA;UAAA;QAAA,IAAC,CACDC,KAAK,CAAC,UAACC,GAAG,EAAG;UACVd,MAAM,CAACc,GAAG,CAAC;QACf,CAAC,CAAC;MACN,CAAC,CAAC;IAAA;IAAAtB,KAAA,CAEFuB,MAAM,GAAG,YAAM,CAEf,CAAC;IAAAvB,KAAA,CAEDwB,eAAe,GAAAZ,iBAAA,CAAG,aAAU;MACxB,IAAI;QACA,IAAMa,WAAW,SAAShC,YAAY,CAACiC,OAAO,CAAC,OAAO,CAAC;QACvDX,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAES,WAAW,CAAC;QAC5C,OAAOlC,SAAS,CAACkC,WAAW,CAAC;MACjC,CAAC,CAAC,OAAOR,KAAK,EAAE;QACZF,OAAO,CAACE,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;QAC/C,OAAO,IAAI;MACf;IACJ,CAAC;IAAAjB,KAAA,CAMD2B,QAAQ,GAAG,UAACC,IAAI,EAACxB,KAAK,EAACC,QAAQ,EAACwB,IAAI;MAAA,OAChC7B,KAAA,CAAKS,IAAI,CAACf,KAAK,GAAC,SAAS,EAAC;QAACkC,IAAI,EAAJA,IAAI;QAACxB,KAAK,EAALA,KAAK;QAACC,QAAQ,EAARA,QAAQ;QAACwB,IAAI,EAAJA;MAAI,CAAC,CAAC;IAAA;IAAA,OAAA7B,KAAA;EAtCzD;EAAC,OAAA8B,YAAA,CAAAnC,WAAA;AAAA,EAHqBL,cAAc;AA8CxC,IAAIyC,WAAW,GAAG,IAAIpC,WAAW,CAAC,CAAC;AACnC,eAAeoC,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}