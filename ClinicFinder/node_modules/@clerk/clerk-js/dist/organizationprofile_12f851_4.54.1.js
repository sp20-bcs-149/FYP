"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[229],{4095:function(e,t,i){i.d(t,{l:function(){return g}});var n=i(2903),a=i(4438),o=i(2784),r=i(3476),l=i(5064),s=i(4334),c=i(3736),d=i(7135);const u=e=>/^\S+@\S+\.\S+$/.test(e),g=e=>{var t,i;const{navigate:g}=(0,c.useRouter)(),{onSuccess:m,onReset:h=(()=>g("..")),resetButtonLabel:f,organization:b}=e,p=(0,l.useCardState)(),{t:z}=(0,s.zJ)(),[v,P]=o.useState(!1),[Z,_]=o.useState([]);if(!b)return null;const y=[{label:z((0,d.JD)("admin")),value:"admin"},{label:z((0,d.JD)("basic_member")),value:"basic_member"}],C=(0,d.Yp)("emailAddress","",{type:"text",label:(0,s.u1)("formFieldLabel__emailAddresses")}),{props:{enableErrorAfterBlur:S,errorText:x,hasLostFocus:B,isFocused:T,setError:R,setWarning:K,setSuccessful:w,successfulText:O,warningText:F,...L}}=C,D=(0,d.Yp)("role","basic_member",{options:y,label:"Role",placeholder:""});o.useEffect((()=>{if(Z.length){const e=new Set(Z),t=C.value.split(",");C.setValue(t.filter((t=>!e.has(t))).join(","))}}),[Z]);const X=!!C.value.length||v;return(0,n.BX)(n.HY,{children:[!!Z.length&&(0,n.tZ)(l.Alert,{variant:"danger",align:"start",title:(0,s.u1)("organizationProfile.invitePage.detailsTitle__inviteFailed"),subtitle:Z.join(", "),sx:{border:0}}),(0,n.BX)(l.Form.Root,{onSubmit:async e=>(e.preventDefault(),b.inviteMembers({emailAddresses:C.value.split(","),role:D.value}).then(m).catch((e=>{var t;if(e instanceof a.gO){const i=(null===(t=e.errors[0].meta)||void 0===t?void 0:t.emailAddresses)||[];i.length?_(i):(_([]),(0,d.S3)(e,[],p.setError))}}))),children:[(0,n.tZ)(l.Form.ControlRow,{elementId:C.id,children:(0,n.BX)(r.Flex,{direction:"col",gap:2,sx:{width:"100%"},children:[(0,n.tZ)(r.Text,{localizationKey:(0,s.u1)("formFieldLabel__emailAddresses")}),(0,n.tZ)(r.Text,{localizationKey:(0,s.u1)("formFieldInputPlaceholder__emailAddresses"),colorScheme:"neutral",sx:e=>({fontSize:e.fontSizes.$xs})}),(0,n.tZ)(l.TagInput,{...L,autoFocus:!0,validate:u,sx:{width:"100%"},validateUnsubmittedEmail:e=>P(u(e))})]})}),(0,n.tZ)(l.Form.ControlRow,{elementId:D.id,children:(0,n.BX)(r.Flex,{direction:"col",gap:2,children:[(0,n.tZ)(r.Text,{localizationKey:(0,s.u1)("formFieldLabel__role")}),(0,n.BX)(l.Select,{elementId:"role",...D.props,onChange:e=>D.setValue(e.value),children:[(0,n.tZ)(l.SelectButton,{sx:e=>({width:e.sizes.$48,justifyContent:"space-between",display:"flex"}),children:null===(i=null===(t=D.props.options)||void 0===t?void 0:t.find((e=>e.value===D.value)))||void 0===i?void 0:i.label}),(0,n.tZ)(l.SelectOptionList,{sx:e=>({minWidth:e.sizes.$48})})]})]})}),(0,n.BX)(l.FormButtonContainer,{children:[(0,n.tZ)(l.Form.SubmitButton,{block:!1,isDisabled:!X,localizationKey:(0,s.u1)("organizationProfile.invitePage.formButtonPrimary__continue")}),(0,n.tZ)(l.Form.ResetButton,{localizationKey:f||(0,s.u1)("userProfile.formButtonReset"),block:!1,onClick:h})]})]})]})}},2848:function(e,t,i){i.d(t,{a:function(){return f},F:function(){return h}});var n=i(2903),a=i(3979),o=i(8147),r=i(2425),l=i(3476),s=i(5064),c=i(3033),d=i(3736);const u=({__unstable_manageBillingUrl:e,__unstable_manageBillingMembersLimit:t})=>{const i=(0,d.useRouter)();return(0,n.BX)(l.Flex,{sx:e=>({background:e.colors.$blackAlpha50,padding:e.space.$4,borderRadius:e.radii.$md}),children:[(0,n.tZ)(l.AlertIcon,{variant:"warning",colorScheme:"danger",sx:e=>({marginTop:e.space.$1})}),(0,n.BX)(l.Text,{variant:"regularRegular",sx:e=>({fontWeight:e.fontWeights.$normal,lineHeight:e.lineHeights.$tall}),children:["This organization is limited to ",(0,a.OR)(t)," members.",(0,n.tZ)("br",{}),(0,n.tZ)(l.Link,{variant:"regularRegular",sx:e=>({alignSelf:"flex-start",color:e.colors.$primary500,fontWeight:e.fontWeights.$normal}),onClick:()=>i.navigate((0,a.OR)(e)),children:"Upgrade for unlimited members"})]})]})};var g=i(4095),m=i(2609);const h=(0,s.withCardStateProvider)((()=>{const e=(0,l.localizationKeys)("organizationProfile.invitePage.title"),t=(0,l.localizationKeys)("organizationProfile.invitePage.subtitle"),i=(0,s.useCardState)(),c=(0,o.a2)({onNextStep:()=>i.setError(void 0)}),{organization:d}=(0,r.useCoreOrganization)(),{__unstable_manageBillingUrl:h,__unstable_manageBillingMembersLimit:b}=(0,r.useOrganizationProfileContext)();if(!d)return null;const p=!!b&&(0,a.OR)(b)<=d.pendingInvitationsCount+d.membersCount;return(0,n.BX)(o.en,{...c.props,children:[(0,n.BX)(s.ContentPage,{headerTitle:e,headerSubtitle:t,Breadcrumbs:m.G,children:[p&&h&&(0,n.tZ)(u,{__unstable_manageBillingUrl:h,__unstable_manageBillingMembersLimit:b}),(0,n.tZ)(g.l,{organization:d,onSuccess:c.nextStep})]}),(0,n.tZ)(s.SuccessPage,{title:e,contents:(0,n.tZ)(f,{}),Breadcrumbs:m.G})]})})),f=()=>(0,n.BX)(l.Flex,{direction:"col",center:!0,gap:4,children:[(0,n.tZ)(s.IconCircle,{boxElementDescriptor:l.descriptors.invitationsSentIconBox,iconElementDescriptor:l.descriptors.invitationsSentIcon,icon:c.GT}),(0,n.tZ)(l.Text,{localizationKey:(0,l.localizationKeys)("organizationProfile.invitePage.successMessage")})]})},6884:function(e,t,i){i.d(t,{D:function(){return r}});var n=i(2903),a=i(5064),o=i(4334);const r=e=>{const{organization:t,...i}=e;return(0,n.tZ)(a.AvatarUploader,{...i,title:(0,o.u1)("userProfile.profilePage.imageFormTitle"),avatarPreview:(0,n.tZ)(a.OrganizationAvatar,{size:e=>e.sizes.$11,...t})})}},2609:function(e,t,i){i.d(t,{G:function(){return u},M:function(){return c}});var n=i(2903),a=(i(2784),i(2425)),o=i(5064),r=i(3033),l=i(4334);const s=[{name:(0,l.u1)("organizationProfile.start.headerTitle__members"),id:"members",icon:r.n5,path:"/"},{name:(0,l.u1)("organizationProfile.start.headerTitle__settings"),id:"settings",icon:r.tc,path:"organization-settings"}],c=e=>{const{organization:t}=(0,a.useCoreOrganization)();return t?(0,n.BX)(o.NavbarContextProvider,{children:[(0,n.tZ)(o.NavBar,{header:(0,n.tZ)(o.OrganizationPreview,{size:"sm",organization:t,sx:e=>({margin:`0 0 ${e.space.$4} ${e.space.$2}`})}),routes:s,contentRef:e.contentRef}),e.children]}):null},d={"invite-members":s.find((e=>"members"===e.id)),profile:s.find((e=>"settings"===e.id)),leave:s.find((e=>"settings"===e.id))},u=e=>(0,n.tZ)(o.Breadcrumbs,{...e,pageToRootNavbarRoute:d})},3589:function(e,t,i){i.r(t),i.d(t,{OrganizationProfile:function(){return I},OrganizationProfileModal:function(){return k}});var n=i(2903),a=i(2784),o=i(8147),r=i(2425),l=i(3476),s=i(5064),c=i(3736),d=i(2609),u=i(7135);const g=()=>{const e=(0,s.useCardState)(),{navigateAfterLeaveOrganization:t}=(0,r.useOrganizationProfileContext)(),{organization:i,membership:a}=(0,r.useCoreOrganization)(),o=(0,r.useCoreUser)();return i&&a?(0,n.tZ)(h,{organizationName:null==i?void 0:i.name,title:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.leaveOrganization.title"),messageLine1:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.leaveOrganization.messageLine1"),messageLine2:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.leaveOrganization.messageLine2"),actionDescription:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.leaveOrganization.actionDescription",{organizationName:null==i?void 0:i.name}),submitLabel:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.leaveOrganization.title"),successMessage:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.leaveOrganization.successMessage"),onConfirmation:()=>e.runAsync(i.removeMember(o.id)).then(t)}):null},m=()=>{const e=(0,s.useCardState)(),{navigateAfterLeaveOrganization:t}=(0,r.useOrganizationProfileContext)(),{organization:i,membership:a}=(0,r.useCoreOrganization)();return i&&a?(0,n.tZ)(h,{organizationName:null==i?void 0:i.name,title:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.deleteOrganization.title"),messageLine1:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.deleteOrganization.messageLine1"),messageLine2:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.deleteOrganization.messageLine2"),actionDescription:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.deleteOrganization.actionDescription",{organizationName:null==i?void 0:i.name}),submitLabel:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.deleteOrganization.title"),successMessage:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.deleteOrganization.successMessage"),onConfirmation:()=>e.runAsync(i.destroy()).then(t)}):null},h=(0,s.withCardStateProvider)((e=>{const{title:t,messageLine1:i,messageLine2:a,actionDescription:r,organizationName:g,successMessage:m,submitLabel:h,onConfirmation:f,colorScheme:b="danger"}=e,p=(0,o.a2)(),z=(0,s.useCardState)(),{navigate:v}=(0,c.useRouter)(),P=(0,u.Yp)("deleteOrganizationConfirmation","",{type:"text",label:(0,l.localizationKeys)("formFieldLabel__confirmDeletion"),isRequired:!0,placeholder:g}),Z=!r||P.value===g;return(0,n.BX)(o.en,{...p.props,children:[(0,n.tZ)(s.ContentPage,{headerTitle:t,Breadcrumbs:d.G,children:(0,n.BX)(s.Form.Root,{onSubmit:async()=>{try{await f().then((()=>p.nextStep()))}catch(e){(0,u.S3)(e,[],z.setError)}},children:[(0,n.tZ)(l.Text,{localizationKey:i}),(0,n.tZ)(l.Text,{localizationKey:a}),(0,n.tZ)(l.Text,{localizationKey:r}),(0,n.tZ)(s.Form.ControlRow,{elementId:P.id,children:(0,n.tZ)(s.Form.Control,{...P.props,required:!0})}),(0,n.BX)(s.FormButtonContainer,{children:[(0,n.tZ)(s.Form.SubmitButton,{block:!1,colorScheme:b,localizationKey:h,isDisabled:!Z}),(0,n.tZ)(s.Form.ResetButton,{localizationKey:(0,l.localizationKeys)("userProfile.formButtonReset"),block:!1,onClick:async()=>{await v("..")}})]})]})}),(0,n.tZ)(s.SuccessPage,{title:t,text:m})]})}));var f=i(2848),b=i(3033);const p=e=>{const{headers:t,page:i,onPageChange:a,rows:o,isLoading:r,itemCount:c,itemsPerPage:d}=e,u=0!==o.length?Math.ceil(c/d):1,g=(i-1)*o.length,m=Math.min(i*o.length);return(0,n.BX)(l.Col,{gap:4,sx:{width:"100%"},children:[(0,n.tZ)(l.Flex,{sx:{overflowX:"auto"},children:(0,n.BX)(l.Table,{sx:{width:"100%"},children:[(0,n.tZ)(l.Thead,{children:(0,n.tZ)(l.Tr,{children:t.map(((e,t)=>(0,n.tZ)(l.Th,{localizationKey:e},t)))})}),(0,n.tZ)(l.Tbody,{children:r?(0,n.tZ)(l.Tr,{children:(0,n.tZ)(l.Td,{colSpan:4,children:(0,n.tZ)(l.Spinner,{sx:{margin:"auto",display:"block"}})})}):o.length?o:(0,n.tZ)(z,{},"empty")})]})}),(0,n.tZ)(s.Pagination,{count:u,page:i,onChange:a,siblingCount:1,rowInfo:{allRowsCount:c,startingRow:o.length?g+1:g,endingRow:m}})]})},z=()=>(0,n.tZ)(l.Tr,{children:(0,n.tZ)(l.Td,{colSpan:4,children:(0,n.tZ)(l.Text,{localizationKey:(0,l.localizationKeys)("organizationProfile.membersPage.detailsTitle__emptyRow"),sx:e=>({margin:"auto",display:"block",width:"fit-content",fontSize:e.fontSizes.$xs})})})}),v=e=>(0,n.tZ)(l.Tr,{...e,sx:e=>({":hover":{backgroundColor:e.colors.$blackAlpha50}})}),P=e=>{const{value:t,onChange:i,isDisabled:a}=e,{t:o}=(0,l.useLocalizations)(),r=[{label:o((0,u.JD)("admin")),value:"admin"},{label:o((0,u.JD)("basic_member")),value:"basic_member"}],c=[{label:o((0,u.JD)("guest_member")),value:"guest_member"}],d=[...r,...c].find((e=>e.value===t));return(0,n.BX)(s.Select,{elementId:"role",options:r,value:t,onChange:e=>i(e.value),children:[(0,n.tZ)(s.SelectButton,{sx:e=>({color:e.colors.$colorTextSecondary,backgroundColor:"transparent"}),isDisabled:a,children:null==d?void 0:d.label}),(0,n.tZ)(s.SelectOptionList,{})]})},Z=()=>{const e=(0,s.useCardState)(),{page:t,changePage:i}=(0,s.usePagination)({defaultPage:1}),{organization:a,membershipList:o,membership:c,...d}=(0,r.useCoreOrganization)({membershipList:{offset:10*(t-1),limit:10}}),g="admin"===(null==c?void 0:c.role),m=()=>{const e=d.unstable__mutate;e&&"function"==typeof e&&e()};if(!a)return null;const h=g&&(null==a?void 0:a.membersCount)>1,f=t=>()=>{if(g)return e.runAsync(t.destroy()).then(m).catch((t=>(0,u.S3)(t,[],e.setError)))};return(0,n.tZ)(p,{page:t,onPageChange:i,itemCount:a.membersCount,itemsPerPage:10,isLoading:!o,headers:[(0,l.localizationKeys)("organizationProfile.membersPage.activeMembersTab.tableHeader__user"),(0,l.localizationKeys)("organizationProfile.membersPage.activeMembersTab.tableHeader__joined"),(0,l.localizationKeys)("organizationProfile.membersPage.activeMembersTab.tableHeader__role"),(0,l.localizationKeys)("organizationProfile.membersPage.activeMembersTab.tableHeader__actions")],rows:(o||[]).map((t=>{return(0,n.tZ)(_,{membership:t,onRoleChange:h?(i=t,t=>{if(g)return e.runAsync(i.update({role:t})).catch((t=>(0,u.S3)(t,[],e.setError)))}):void 0,onRemove:f(t)},t.id);var i}))})},_=e=>{const{membership:t,onRemove:i,onRoleChange:a}=e,o=(0,s.useCardState)(),{membership:c}=(0,r.useCoreOrganization)(),d=(0,r.useCoreUser)(),g="admin"===(null==c?void 0:c.role),m=d.id===t.publicUserData.userId;return(0,n.BX)(v,{children:[(0,n.tZ)(l.Td,{children:(0,n.tZ)(s.UserPreview,{sx:{maxWidth:"30ch"},user:t.publicUserData,subtitle:t.publicUserData.identifier,badge:m&&(0,n.tZ)(l.Badge,{localizationKey:(0,l.localizationKeys)("badge__you")})})}),(0,n.tZ)(l.Td,{children:t.createdAt.toLocaleDateString()}),(0,n.tZ)(l.Td,{children:g?(0,n.tZ)(P,{isDisabled:o.isLoading||!a,value:t.role,onChange:a}):(0,n.tZ)(l.Text,{sx:e=>({opacity:e.opacity.$inactive}),localizationKey:(0,u.JD)(t.role)})}),(0,n.tZ)(l.Td,{children:g&&(0,n.tZ)(s.ThreeDotsMenu,{actions:[{label:(0,l.localizationKeys)("organizationProfile.membersPage.activeMembersTab.menuAction__remove"),isDestructive:!0,onClick:i,isDisabled:m}],elementId:"member"})})]})},y=()=>{const e=(0,s.useCardState)(),{page:t,changePage:i}=(0,s.usePagination)(),{organization:a,invitationList:o,...c}=(0,r.useCoreOrganization)({invitationList:{offset:10*(t-1),limit:10}}),d=()=>{const e=c.unstable__mutate;e&&"function"==typeof e&&e()};return a?(0,n.tZ)(p,{page:t,onPageChange:i,itemCount:a.pendingInvitationsCount,itemsPerPage:10,isLoading:!o,headers:[(0,l.localizationKeys)("organizationProfile.membersPage.activeMembersTab.tableHeader__user"),(0,l.localizationKeys)("organizationProfile.membersPage.invitedMembersTab.tableHeader__invited"),(0,l.localizationKeys)("organizationProfile.membersPage.activeMembersTab.tableHeader__role"),(0,l.localizationKeys)("organizationProfile.membersPage.activeMembersTab.tableHeader__actions")],rows:(o||[]).map((t=>{return(0,n.tZ)(C,{invitation:t,onRevoke:(a=t,()=>e.runAsync(a.revoke).then(d).then((()=>i(1))).catch((t=>(0,u.S3)(t,[],e.setError))))},t.id);var a}))}):null},C=e=>{const{invitation:t,onRevoke:i}=e;return(0,n.BX)(v,{children:[(0,n.tZ)(l.Td,{children:(0,n.tZ)(s.UserPreview,{sx:{maxWidth:"30ch"},showAvatar:!1,user:{primaryEmailAddress:{emailAddress:t.emailAddress}}})}),(0,n.tZ)(l.Td,{children:t.createdAt.toLocaleDateString()}),(0,n.tZ)(l.Td,{children:(0,n.tZ)(l.Text,{colorScheme:"neutral",localizationKey:(0,u.JD)(t.role)})}),(0,n.tZ)(l.Td,{children:(0,n.tZ)(s.ThreeDotsMenu,{actions:[{label:(0,l.localizationKeys)("organizationProfile.membersPage.invitedMembersTab.menuAction__revoke"),isDestructive:!0,onClick:i}],elementId:"invitation"})})]})};var S=i(3979);const x=()=>{const{organization:e}=(0,r.useCoreOrganization)(),{__unstable_manageBillingUrl:t,__unstable_manageBillingLabel:i,__unstable_manageBillingMembersLimit:a}=(0,r.useOrganizationProfileContext)(),o=(0,c.useRouter)();return e?(0,n.BX)(l.Flex,{sx:e=>({background:e.colors.$blackAlpha50,padding:e.space.$4,justifyContent:"space-between",alignItems:"flex-start",borderRadius:e.radii.$md}),children:[(0,n.BX)(l.Col,{children:[(0,n.tZ)(l.Text,{sx:e=>({lineHeight:e.lineHeights.$tall}),children:"Members can be given access to applications."}),(0,S.OR)(a)>0&&(0,n.tZ)(l.Link,{variant:"regularRegular",sx:e=>({alignSelf:"flex-start",color:e.colors.$primary500,marginTop:e.space.$1,fontWeight:e.fontWeights.$normal}),onClick:()=>o.navigate((0,S.OR)(t)),children:(0,S.OR)(i)||"Manage billing"})]}),(0,n.tZ)(l.Col,{children:(0,n.BX)(l.Text,{variant:"regularRegular",sx:e=>({fontWeight:e.fontWeights.$normal,lineHeight:e.lineHeights.$tall,color:e.colors.$blackAlpha600}),children:[(null==e?void 0:e.membersCount)+(null==e?void 0:e.pendingInvitationsCount)," of"," ",a?`${(0,S.OR)(a)} members`:"unlimited"]})})]}):null},B=(0,s.withCardStateProvider)((()=>{const{navigate:e}=(0,c.useRouter)(),t=(0,s.useCardState)(),{membership:i}=(0,r.useCoreOrganization)(),{__unstable_manageBillingUrl:a}=(0,r.useOrganizationProfileContext)(),o="admin"===(null==i?void 0:i.role);return(0,n.BX)(l.Col,{elementDescriptor:l.descriptors.page,gap:8,children:[(0,n.tZ)(s.CardAlert,{children:t.error}),(0,n.tZ)(s.NavbarMenuButtonRow,{}),(0,n.BX)(l.Col,{elementDescriptor:l.descriptors.profilePage,elementId:l.descriptors.profilePage.setId("organizationMembers"),gap:8,children:[(0,n.BX)(l.Flex,{justify:"between",align:"center",children:[(0,n.BX)(s.Header.Root,{children:[(0,n.tZ)(s.Header.Title,{localizationKey:(0,l.localizationKeys)("organizationProfile.start.headerTitle__members"),textVariant:"xxlargeMedium"}),(0,n.tZ)(s.Header.Subtitle,{localizationKey:(0,l.localizationKeys)("organizationProfile.start.headerSubtitle__members")})]}),o&&(0,n.tZ)(s.IconButton,{elementDescriptor:l.descriptors.membersPageInviteButton,"aria-label":"Invite",onClick:()=>e("invite-members"),icon:(0,n.tZ)(l.Icon,{icon:b.av,size:"sm",sx:e=>({marginRight:e.space.$2})}),textVariant:"buttonExtraSmallBold",localizationKey:(0,l.localizationKeys)("organizationProfile.membersPage.action__invite")})]}),(0,n.BX)(s.Tabs,{children:[(0,n.BX)(s.TabsList,{children:[(0,n.tZ)(s.Tab,{localizationKey:(0,l.localizationKeys)("organizationProfile.membersPage.start.headerTitle__active")}),o&&(0,n.tZ)(s.Tab,{localizationKey:(0,l.localizationKeys)("organizationProfile.membersPage.start.headerTitle__invited")})]}),(0,n.BX)(s.TabPanels,{children:[(0,n.tZ)(s.TabPanel,{sx:{width:"100%"},children:(0,n.BX)(l.Flex,{gap:4,direction:"col",sx:{width:"100%"},children:[o&&a&&(0,n.tZ)(x,{}),(0,n.tZ)(Z,{})]})}),o&&(0,n.tZ)(s.TabPanel,{sx:{width:"100%"},children:(0,n.BX)(l.Flex,{direction:"col",gap:4,sx:{width:"100%"},children:[o&&a&&(0,n.tZ)(x,{}),(0,n.tZ)(y,{})]})})]})]})]})]})}));var T=i(4166);const R=()=>(0,n.BX)(l.Col,{elementDescriptor:l.descriptors.page,gap:8,children:[(0,n.tZ)(s.NavbarMenuButtonRow,{}),(0,n.BX)(l.Col,{elementDescriptor:l.descriptors.profilePage,elementId:l.descriptors.profilePage.setId("organizationSettings"),gap:8,children:[(0,n.BX)(s.Header.Root,{children:[(0,n.tZ)(s.Header.Title,{localizationKey:(0,l.localizationKeys)("organizationProfile.start.headerTitle__settings"),textVariant:"xxlargeMedium"}),(0,n.tZ)(s.Header.Subtitle,{localizationKey:(0,l.localizationKeys)("organizationProfile.start.headerSubtitle__settings")})]}),(0,n.tZ)(K,{}),(0,n.tZ)(w,{})]})]}),K=()=>{const{organization:e,membership:t}=(0,r.useCoreOrganization)(),{navigate:i}=(0,c.useRouter)(),a="admin"===(null==t?void 0:t.role);if(!e)return null;const o=(0,n.tZ)(s.OrganizationPreview,{organization:e,size:"lg"});return(0,n.tZ)(s.ProfileSection,{title:(0,l.localizationKeys)("organizationProfile.profilePage.title"),id:"organizationProfile",children:a?(0,n.tZ)(T.o,{onClick:()=>i("profile"),children:o}):o})},w=()=>{const{organization:e,membership:t,membershipList:i}=(0,r.useCoreOrganization)({membershipList:{role:["admin"]}}),{navigate:a}=(0,c.useRouter)();if(!e||!t||!i)return null;const o=e.adminDeleteEnabled,d=i.length>1,u="admin"===t.role;return(0,n.tZ)(s.ProfileSection,{id:"organizationDanger",title:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.title"),sx:e=>({marginBottom:e.space.$4}),children:(0,n.BX)(l.Flex,{gap:4,children:[(0,n.tZ)(s.IconButton,{"aria-label":"Leave organization",icon:(0,n.tZ)(l.Icon,{icon:b.um,size:"sm",sx:e=>({marginRight:e.space.$2})}),variant:"outline",colorScheme:"danger",textVariant:"buttonExtraSmallBold",onClick:()=>a("leave"),isDisabled:u&&!d,localizationKey:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.leaveOrganization.title")}),u&&o&&(0,n.tZ)(s.IconButton,{"aria-label":"Delete organization",icon:(0,n.tZ)(l.Icon,{icon:b.um,size:"sm",sx:e=>({marginRight:e.space.$2})}),variant:"outline",colorScheme:"danger",textVariant:"buttonExtraSmallBold",onClick:()=>a("delete"),localizationKey:(0,l.localizationKeys)("organizationProfile.profilePage.dangerSection.deleteOrganization.title")})]})})};var O=i(9093),F=i(6884);const L=(0,s.withCardStateProvider)((()=>{const e=(0,l.localizationKeys)("organizationProfile.profilePage.title"),t=(0,l.localizationKeys)("organizationProfile.profilePage.subtitle"),i=(0,s.useCardState)(),[c,g]=a.useState(!1),{organization:m}=(0,r.useCoreOrganization)(),h=(0,o.a2)({onNextStep:()=>i.setError(void 0)}),f=(0,u.Yp)("name",(null==m?void 0:m.name)||"",{type:"text",label:(0,l.localizationKeys)("formFieldLabel__organizationName"),placeholder:(0,l.localizationKeys)("formFieldInputPlaceholder__organizationName")}),b=(0,u.Yp)("slug",(null==m?void 0:m.slug)||"",{type:"text",label:(0,l.localizationKeys)("formFieldLabel__organizationSlug"),placeholder:(0,l.localizationKeys)("formFieldInputPlaceholder__organizationSlug")});if(!m)return null;const p=m.name!==f.value||m.slug!==b.value,z=(p||c)&&!b.errorText;return(0,n.BX)(o.en,{...h.props,children:[(0,n.tZ)(s.ContentPage,{headerTitle:e,headerSubtitle:t,Breadcrumbs:d.G,children:(0,n.BX)(s.Form.Root,{onSubmit:async e=>(e.preventDefault(),(p?m.update({name:f.value,slug:b.value}):Promise.resolve()).then(h.nextStep).catch((e=>{(0,u.S3)(e,[f,b],i.setError)}))),children:[(0,n.tZ)(F.D,{organization:m,onAvatarChange:e=>m.setLogo({file:e}).then((()=>{g(!0),i.setIdle()})).catch((e=>(0,u.S3)(e,[],i.setError))),onAvatarRemove:(0,S.QO)(m.imageUrl)?null:()=>{m.setLogo({file:null}).then((()=>{g(!0),i.setIdle()})).catch((e=>(0,u.S3)(e,[],i.setError)))}}),(0,n.tZ)(s.Form.ControlRow,{elementId:f.id,children:(0,n.tZ)(s.Form.Control,{...f.props,autoFocus:!0,required:!0})}),(0,n.tZ)(s.Form.ControlRow,{elementId:b.id,children:(0,n.tZ)(s.Form.Control,{...b.props,onChange:e=>{var t;t=e.target.value,b.setValue(t),b.setError(void 0)},required:!0})}),(0,n.tZ)(s.FormButtons,{isDisabled:!z})]})}),(0,n.tZ)(s.SuccessPage,{title:e,text:(0,l.localizationKeys)("organizationProfile.profilePage.successMessage"),Breadcrumbs:O._})]})})),D=e=>(0,n.BX)(s.ProfileCardContent,{contentRef:e.contentRef,children:[(0,n.tZ)(c.Route,{path:"organization-settings",children:(0,n.BX)(c.Switch,{children:[(0,n.tZ)(c.Route,{path:"profile",flowStart:!0,children:(0,n.tZ)(L,{})}),(0,n.tZ)(c.Route,{path:"leave",flowStart:!0,children:(0,n.tZ)(g,{})}),(0,n.tZ)(c.Route,{path:"delete",flowStart:!0,children:(0,n.tZ)(m,{})}),(0,n.tZ)(c.Route,{index:!0,children:(0,n.tZ)(R,{})})]})}),(0,n.tZ)(c.Route,{children:(0,n.BX)(c.Switch,{children:[(0,n.tZ)(c.Route,{path:"invite-members",flowStart:!0,children:(0,n.tZ)(f.F,{})}),(0,n.tZ)(c.Route,{index:!0,children:(0,n.tZ)(B,{})})]})})]}),X=(0,r.withCoreUserGuard)((()=>{const e=a.useRef(null);return(0,n.tZ)(s.ProfileCard,{sx:{height:"100%"},children:(0,n.tZ)(d.M,{contentRef:e,children:(0,n.tZ)(D,{contentRef:e})})})})),I=(0,o.Q6)((0,o.pK)((0,s.withCardStateProvider)((e=>{const{organization:t}=(0,r.useCoreOrganization)();return t?(0,n.tZ)(l.Flow.Root,{flow:"organizationProfile",children:(0,n.tZ)(l.Flow.Part,{children:(0,n.tZ)(c.Switch,{children:(0,n.tZ)(c.Route,{children:(0,n.tZ)(X,{})})})})}):null})),"OrganizationProfile",{mode:"redirect"})),k=e=>{const t={...e,routing:"virtual",componentName:"OrganizationProfile",mode:"modal"};return(0,n.tZ)(c.Route,{path:"organizationProfile",children:(0,n.tZ)(r.ComponentContext.Provider,{value:t,children:(0,n.tZ)("div",{children:(0,n.tZ)(I,{...t})})})})}},4781:function(e,t,i){i.d(t,{v:function(){return n}});const n=({signUp:e,verifyEmailPath:t,verifyPhonePath:i,navigate:n,handleComplete:a,redirectUrl:o="",redirectUrlComplete:r=""})=>{var l,s;if("complete"===e.status)return a&&a();if("missing_requirements"===e.status){if(e.missingFields.some((e=>"saml"===e)))return e.authenticateWithRedirect({strategy:"saml",redirectUrl:o,redirectUrlComplete:r,continueSignUp:!0});if((null===(l=e.unverifiedFields)||void 0===l?void 0:l.includes("email_address"))&&t)return n(t);if((null===(s=e.unverifiedFields)||void 0===s?void 0:s.includes("phone_number"))&&i)return n(i)}}},4166:function(e,t,i){i.d(t,{B:function(){return s},o:function(){return l}});var n=i(2903),a=i(3476),o=i(5064),r=i(3033);const l=e=>(0,n.tZ)(o.ArrowBlockButton,{variant:"ghost",...e}),s=e=>{var t;const{id:i,leftIcon:o,...s}=e;return(0,n.tZ)(l,{elementDescriptor:a.descriptors.profileSectionPrimaryButton,elementId:null===(t=a.descriptors.profileSectionPrimaryButton)||void 0===t?void 0:t.setId(i),colorScheme:"primary",...s,sx:e=>({justifyContent:"flex-start",gap:e.space.$2}),leftIcon:(0,n.tZ)(a.Icon,{icon:o||r.v3,sx:e=>({width:e.sizes.$2x5,height:e.sizes.$2x5})}),children:e.children})}},9093:function(e,t,i){i.d(t,{Y:function(){return s},_:function(){return d}});var n=i(2903),a=(i(2784),i(5064)),o=i(3033),r=i(4334);const l=[{name:(0,r.u1)("userProfile.start.headerTitle__account"),id:"account",icon:o.n5,path:"/"},{name:(0,r.u1)("userProfile.start.headerTitle__security"),id:"security",icon:o.qy,path:""}],s=e=>(0,n.BX)(a.NavbarContextProvider,{children:[(0,n.tZ)(a.NavBar,{routes:l,contentRef:e.contentRef}),e.children]}),c={profile:l.find((e=>"account"===e.id)),"email-address":l.find((e=>"account"===e.id)),"phone-number":l.find((e=>"account"===e.id)),"connected-account":l.find((e=>"account"===e.id)),"web3-wallet":l.find((e=>"account"===e.id)),username:l.find((e=>"account"===e.id)),"multi-factor":l.find((e=>"security"===e.id)),password:l.find((e=>"security"===e.id))},d=e=>(0,n.tZ)(a.Breadcrumbs,{...e,pageToRootNavbarRoute:c})}}]);