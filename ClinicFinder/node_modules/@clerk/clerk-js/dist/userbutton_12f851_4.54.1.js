"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[132],{6164:function(e,t,o){o.r(t),o.d(t,{UserButton:function(){return A}});var n=o(2903),r=o(4016),i=o(2425),s=o(3476),c=o(5064),l=o(8251),u=o(2784),a=o(3244),d=o(3033),p=o(9912);const B=u.forwardRef(((e,t)=>{const{close:o,...r}=e,l=(0,i.useCoreSession)(),{authConfig:u}=(0,i.useEnvironment)(),B=(0,i.useCoreUser)(),{handleAddAccountClicked:v,handleManageAccountClicked:g,handleSessionClicked:m,handleSignOutAllClicked:A,handleSignOutSessionClicked:C,otherSessions:h}=(0,p.Z)({...(0,i.useUserButtonContext)(),actionCompleteCallback:o,user:B}),f=(0,n.tZ)(c.Action,{icon:d.v3,label:(0,s.localizationKeys)("userButton.action__addAccount"),onClick:v}),P=u.singleSessionMode?null:h.length>0?(0,n.BX)(n.HY,{children:[(0,n.BX)(c.SecondaryActions,{children:[h.map((e=>(0,n.tZ)(c.PreviewButton,{icon:d.oX,sx:e=>({height:e.sizes.$14,borderRadius:0}),onClick:m(e),children:(0,n.tZ)(c.UserPreview,{user:e.user,size:"sm",avatarSx:e=>({margin:`0 calc(${e.space.$3}/2)`})})},e.id))),f]}),(0,n.tZ)(c.Actions,{children:(0,n.tZ)(c.Action,{icon:d.kM,label:(0,s.localizationKeys)("userButton.action__signOutAll"),onClick:A})})]}):(0,n.tZ)(c.SecondaryActions,{children:f});return(0,n.tZ)(a.r,{elementDescriptor:s.descriptors.userButtonPopoverRootBox,children:(0,n.BX)(c.PopoverCard.Root,{elementDescriptor:s.descriptors.userButtonPopoverCard,ref:t,...r,children:[(0,n.BX)(c.PopoverCard.Main,{elementDescriptor:s.descriptors.userButtonPopoverMain,children:[(0,n.tZ)(c.UserPreview,{elementId:"userButton",user:B,sx:e=>({padding:`0 ${e.space.$6}`,marginBottom:e.space.$2})}),(0,n.BX)(c.Actions,{elementDescriptor:s.descriptors.userButtonPopoverActions,children:[(0,n.tZ)(c.Action,{elementDescriptor:s.descriptors.userButtonPopoverActionButton,elementId:s.descriptors.userButtonPopoverActionButton.setId("manageAccount"),iconBoxElementDescriptor:s.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:s.descriptors.userButtonPopoverActionButtonIconBox.setId("manageAccount"),iconElementDescriptor:s.descriptors.userButtonPopoverActionButtonIcon,iconElementId:s.descriptors.userButtonPopoverActionButtonIcon.setId("manageAccount"),textElementDescriptor:s.descriptors.userButtonPopoverActionButtonText,textElementId:s.descriptors.userButtonPopoverActionButtonText.setId("manageAccount"),icon:d.tc,label:(0,s.localizationKeys)("userButton.action__manageAccount"),onClick:g}),(0,n.tZ)(c.Action,{elementDescriptor:s.descriptors.userButtonPopoverActionButton,elementId:s.descriptors.userButtonPopoverActionButton.setId("signOut"),iconBoxElementDescriptor:s.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:s.descriptors.userButtonPopoverActionButtonIconBox.setId("signOut"),iconElementDescriptor:s.descriptors.userButtonPopoverActionButtonIcon,iconElementId:s.descriptors.userButtonPopoverActionButtonIcon.setId("signOut"),textElementDescriptor:s.descriptors.userButtonPopoverActionButtonText,textElementId:s.descriptors.userButtonPopoverActionButtonText.setId("signOut"),icon:d.lv,label:(0,s.localizationKeys)("userButton.action__signOut"),onClick:C(l)})]}),P]}),(0,n.tZ)(c.PopoverCard.Footer,{elementDescriptor:s.descriptors.userButtonPopoverFooter})]})})})),v=(0,c.withAvatarShimmer)((0,u.forwardRef)(((e,t)=>{const{sx:o,...r}=e,l=(0,i.useCoreUser)();return(0,n.tZ)(s.Button,{elementDescriptor:s.descriptors.userButtonTrigger,variant:"roundWrapper",sx:[e=>({borderRadius:e.radii.$circle}),o],ref:t,...r,children:(0,n.tZ)(c.UserAvatar,{boxElementDescriptor:s.descriptors.userButtonAvatarBox,imageElementDescriptor:s.descriptors.userButtonAvatarImage,...l,size:e=>e.sizes.$8})})}))),g=(0,c.withFloatingTree)((()=>{const{defaultOpen:e}=(0,i.useUserButtonContext)(),{floating:t,reference:o,styles:r,toggle:u,isOpen:a,nodeId:d,context:p}=(0,l.Sv)({defaultOpen:e,placement:"bottom-end",offset:8});return(0,n.tZ)(s.Flow.Root,{flow:"userButton",children:(0,n.BX)(s.Flex,{elementDescriptor:s.descriptors.userButtonBox,isOpen:a,align:"center",gap:2,children:[(0,n.tZ)(m,{}),(0,n.tZ)(v,{ref:o,onClick:u,isOpen:a}),(0,n.tZ)(c.Popover,{nodeId:d,context:p,isOpen:a,children:(0,n.tZ)(B,{close:u,ref:t,style:{...r}})})]})})})),m=()=>{const e=(0,i.useCoreUser)(),{showName:t}=(0,i.useUserButtonContext)();return t?(0,n.tZ)(s.Text,{variant:"regularMedium",elementDescriptor:s.descriptors.userButtonOuterIdentifier,children:(0,r.Pp)(e)||(0,r.xC)(e)}):null},A=(0,i.withCoreUserGuard)((0,c.withCardStateProvider)(g))},9912:function(e,t,o){o.d(t,{Z:function(){return l}});var n=o(196),r=o(2425),i=o(5064),s=o(3736),c=o(7135);const l=e=>{const{setActive:t,signOut:o,openUserProfile:l}=(0,r.useCoreClerk)(),u=(0,i.useCardState)(),a=(0,r.useCoreSessionList)(),{navigate:d}=(0,s.useRouter)(),p=a.filter((e=>"active"===e.status)),B=p.filter((t=>{var o,n;return(null===(o=t.user)||void 0===o?void 0:o.id)!==(null===(n=e.user)||void 0===n?void 0:n.id)}));return{handleSignOutSessionClicked:t=>()=>0===B.length?o(e.navigateAfterSignOut):o(e.navigateAfterMultiSessionSingleSignOut,{sessionId:t.id}).finally((()=>u.setIdle())),handleManageAccountClicked:()=>{var t,o;return"navigation"===e.userProfileMode?d(e.userProfileUrl||"").finally((()=>{(async()=>{var t;await(0,c._v)(300),null===(t=e.actionCompleteCallback)||void 0===t||t.call(e)})()})):(l({...e.userProfileProps,appearance:null===(t=e.appearance)||void 0===t?void 0:t.userProfile}),null===(o=e.actionCompleteCallback)||void 0===o?void 0:o.call(e))},handleSignOutAllClicked:()=>o(e.navigateAfterSignOut),handleSessionClicked:o=>async()=>(u.setLoading(),t({session:o,beforeEmit:e.navigateAfterSwitchSession}).finally((()=>{var t;u.setIdle(),null===(t=e.actionCompleteCallback)||void 0===t||t.call(e)}))),handleAddAccountClicked:()=>((0,n.T)(e.signInUrl||window.location.href),(0,c._v)(2e3)),otherSessions:B,activeSessions:p}}}}]);