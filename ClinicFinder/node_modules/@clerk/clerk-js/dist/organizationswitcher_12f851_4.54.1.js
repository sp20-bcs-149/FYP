"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[336],{3214:function(e,i,t){t.r(i),t.d(i,{OrganizationSwitcher:function(){return P}});var r=t(2903),o=t(8147),n=t(2425),a=t(3476),c=t(5064),s=t(8251),l=t(2784),g=t(3979),d=t(3244),p=t(3033),m=t(3736),z=t(9820);const u=e=>{const{onCreateOrganizationClick:i,onPersonalWorkspaceClick:t,onOrganizationClick:o}=e,{organizationList:s}=(0,n.useCoreOrganizationList)(),{organization:l}=(0,n.useCoreOrganization)(),g=(0,n.useCoreUser)(),{username:d,primaryEmailAddress:m,primaryPhoneNumber:u,...h}=g,{hidePersonal:v}=(0,n.useOrganizationSwitcherContext)(),w=(s||[]).map((e=>e.organization)).filter((e=>e.id!==(null==l?void 0:l.id))),P=(0,r.tZ)(c.Action,{elementDescriptor:a.descriptors.organizationSwitcherPopoverActionButton,elementId:a.descriptors.organizationSwitcherPopoverActionButton.setId("createOrganization"),iconBoxElementDescriptor:a.descriptors.organizationSwitcherPopoverActionButtonIconBox,iconBoxElementId:a.descriptors.organizationSwitcherPopoverActionButtonIconBox.setId("createOrganization"),iconElementDescriptor:a.descriptors.organizationSwitcherPopoverActionButtonIcon,iconElementId:a.descriptors.organizationSwitcherPopoverActionButtonIcon.setId("createOrganization"),textElementDescriptor:a.descriptors.organizationSwitcherPopoverActionButtonText,textElementId:a.descriptors.organizationSwitcherPopoverActionButtonText.setId("createOrganization"),icon:p.v3,label:(0,a.localizationKeys)("organizationSwitcher.action__createOrganization"),onClick:i});return(0,r.BX)(c.SecondaryActions,{elementDescriptor:a.descriptors.organizationSwitcherPopoverActions,children:[(0,r.BX)(a.Box,{sx:e=>({maxHeight:`calc(4 * ${e.sizes.$12})`,overflowY:"auto",...z.common.unstyledScrollbar(e)}),children:[l&&!v&&(0,r.tZ)(c.PreviewButton,{elementDescriptor:a.descriptors.organizationSwitcherPreviewButton,icon:p.oX,sx:{borderRadius:0},onClick:t,children:(0,r.tZ)(c.PersonalWorkspacePreview,{user:h,size:"sm",avatarSx:e=>({margin:`0 calc(${e.space.$3}/2)`}),title:(0,a.localizationKeys)("organizationSwitcher.personalWorkspace")})}),w.map((e=>(0,r.tZ)(c.PreviewButton,{elementDescriptor:a.descriptors.organizationSwitcherPreviewButton,icon:p.oX,sx:{borderRadius:0},onClick:()=>o(e),children:(0,r.tZ)(c.OrganizationPreview,{elementId:"organizationSwitcher",avatarSx:e=>({margin:`0 calc(${e.space.$3}/2)`}),organization:e,size:"sm"})},e.id)))]}),g.createOrganizationEnabled&&P]})},h=l.forwardRef(((e,i)=>{const{close:t,...o}=e,s=(0,c.useCardState)(),{openOrganizationProfile:l,openCreateOrganization:z}=(0,n.useCoreClerk)(),{organization:h}=(0,n.useCoreOrganization)(),{isLoaded:v,setActive:w}=(0,n.useCoreOrganizationList)(),P=(0,m.useRouter)(),{hidePersonal:S,__unstable_manageBillingUrl:B,__unstable_manageBillingLabel:C,__unstable_manageBillingMembersLimit:O,createOrganizationMode:f,organizationProfileMode:x,afterLeaveOrganizationUrl:A,afterCreateOrganizationUrl:I,navigateCreateOrganization:_,navigateOrganizationProfile:b,navigateAfterSwitchOrganization:k}=(0,n.useOrganizationSwitcherContext)(),y=(0,n.useCoreUser)(),{username:E,primaryEmailAddress:Z,primaryPhoneNumber:D,...$}=y;if(!v)return null;const U=(0,r.tZ)(c.Action,{elementDescriptor:a.descriptors.organizationSwitcherPopoverActionButton,elementId:a.descriptors.organizationSwitcherPopoverActionButton.setId("manageOrganization"),iconBoxElementDescriptor:a.descriptors.organizationSwitcherPopoverActionButtonIconBox,iconBoxElementId:a.descriptors.organizationSwitcherPopoverActionButtonIconBox.setId("manageOrganization"),iconElementDescriptor:a.descriptors.organizationSwitcherPopoverActionButtonIcon,iconElementId:a.descriptors.organizationSwitcherPopoverActionButtonIcon.setId("manageOrganization"),textElementDescriptor:a.descriptors.organizationSwitcherPopoverActionButtonText,textElementId:a.descriptors.organizationSwitcherPopoverActionButtonText.setId("manageOrganization"),icon:p.tc,label:(0,a.localizationKeys)("organizationSwitcher.action__manageOrganization"),onClick:()=>(t(),"navigation"===x?b():l({afterLeaveOrganizationUrl:A,__unstable_manageBillingUrl:B,__unstable_manageBillingLabel:C,__unstable_manageBillingMembersLimit:O}))}),L=(0,r.tZ)(c.Action,{icon:p.Nj,label:(0,g.OR)(C)||"Manage billing",onClick:()=>P.navigate((0,g.OR)(B))});return(0,r.tZ)(d.r,{elementDescriptor:a.descriptors.organizationSwitcherPopoverRootBox,children:(0,r.BX)(c.PopoverCard.Root,{elementDescriptor:a.descriptors.organizationSwitcherPopoverCard,ref:i,...o,children:[(0,r.BX)(c.PopoverCard.Main,{elementDescriptor:a.descriptors.organizationSwitcherPopoverMain,children:[h?(0,r.BX)(r.HY,{children:[(0,r.tZ)(c.OrganizationPreview,{elementId:"organizationSwitcher",gap:4,organization:h,user:y,sx:e=>i=>({padding:`0 ${e.space.$6}`,marginBottom:i.space.$2})}),(0,r.BX)(c.Actions,{children:[U,B&&L]})]}):!S&&(0,r.tZ)(c.PersonalWorkspacePreview,{gap:4,user:$,sx:e=>({padding:`0 ${e.space.$6}`,marginBottom:e.space.$6}),title:(0,a.localizationKeys)("organizationSwitcher.personalWorkspace")}),(0,r.tZ)(u,{onCreateOrganizationClick:()=>(t(),"navigation"===f?_():z({afterCreateOrganizationUrl:I})),onPersonalWorkspaceClick:()=>s.runAsync((()=>w({organization:null,beforeEmit:k}))).then(t),onOrganizationClick:e=>s.runAsync((()=>w({organization:e,beforeEmit:k}))).then(t)})]}),(0,r.tZ)(c.PopoverCard.Footer,{elementDescriptor:a.descriptors.organizationSwitcherPopoverFooter})]})})})),v=(0,c.withAvatarShimmer)((0,l.forwardRef)(((e,i)=>{const{sx:t,...o}=e,{username:s,primaryEmailAddress:l,primaryPhoneNumber:g,...d}=(0,n.useCoreUser)(),{organization:m}=(0,n.useCoreOrganization)(),{hidePersonal:z}=(0,n.useOrganizationSwitcherContext)();return(0,r.BX)(a.Button,{elementDescriptor:a.descriptors.organizationSwitcherTrigger,variant:"ghost",colorScheme:"neutral",sx:[e=>({minHeight:0,padding:`0 ${e.space.$2} 0 0`}),t],ref:i,...o,children:[m&&(0,r.tZ)(c.OrganizationPreview,{elementId:"organizationSwitcher",gap:3,size:"sm",organization:m,sx:{maxWidth:"30ch"}}),!m&&(0,r.tZ)(c.PersonalWorkspacePreview,{size:"sm",gap:3,user:d,showAvatar:!z,title:z?(0,a.localizationKeys)("organizationSwitcher.notSelected"):(0,a.localizationKeys)("organizationSwitcher.personalWorkspace")}),(0,r.tZ)(a.Icon,{elementDescriptor:a.descriptors.organizationSwitcherTriggerIcon,icon:p.Qf,sx:e=>({opacity:e.opacity.$sm,marginLeft:`${e.space.$2}`})})]})}))),w=(0,c.withFloatingTree)((()=>{const{floating:e,reference:i,styles:t,toggle:o,isOpen:n,nodeId:l,context:g}=(0,s.Sv)({placement:"bottom-start",offset:8});return(0,r.BX)(a.Flow.Root,{flow:"organizationSwitcher",children:[(0,r.tZ)(v,{ref:i,onClick:o,isOpen:n}),(0,r.tZ)(c.Popover,{nodeId:l,context:g,isOpen:n,children:(0,r.tZ)(h,{close:o,ref:e,style:{...t}})})]})})),P=(0,o.pK)((0,n.withCoreUserGuard)((0,c.withCardStateProvider)(w)),"OrganizationSwitcher",{mode:"hide"})},4781:function(e,i,t){t.d(i,{v:function(){return r}});const r=({signUp:e,verifyEmailPath:i,verifyPhonePath:t,navigate:r,handleComplete:o,redirectUrl:n="",redirectUrlComplete:a=""})=>{var c,s;if("complete"===e.status)return o&&o();if("missing_requirements"===e.status){if(e.missingFields.some((e=>"saml"===e)))return e.authenticateWithRedirect({strategy:"saml",redirectUrl:n,redirectUrlComplete:a,continueSignUp:!0});if((null===(c=e.unverifiedFields)||void 0===c?void 0:c.includes("email_address"))&&i)return r(i);if((null===(s=e.unverifiedFields)||void 0===s?void 0:s.includes("phone_number"))&&t)return r(t)}}}}]);