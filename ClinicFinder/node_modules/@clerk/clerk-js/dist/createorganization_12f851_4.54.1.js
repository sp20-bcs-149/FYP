"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[979],{3555:function(e,t,i){i.r(t),i.d(t,{CreateOrganization:function(){return p},CreateOrganizationModal:function(){return z}});var n=i(2903),r=i(8147),a=i(2425),o=i(3476),l=i(5064),s=i(3736),c=i(2784),u=i(3033),d=i(7135),m=i(4095),g=i(2848),h=i(6884);const f=(0,l.withCardStateProvider)((()=>{const e=(0,o.localizationKeys)("createOrganization.title"),t=(0,o.localizationKeys)("organizationProfile.invitePage.title"),i=(0,l.useCardState)(),[s,f]=c.useState(),{createOrganization:v,isLoaded:p}=(0,a.useCoreOrganizations)(),{setActive:z,closeCreateOrganization:b}=(0,a.useCoreClerk)(),{mode:C,navigateAfterCreateOrganization:_,skipInvitationScreen:Z}=(0,a.useCreateOrganizationContext)(),{organization:x}=(0,a.useCoreOrganization)(),S=(0,r.a2)({onNextStep:()=>i.setError(void 0)}),B=(0,d.Yp)("name","",{type:"text",label:(0,o.localizationKeys)("formFieldLabel__organizationName"),placeholder:(0,o.localizationKeys)("formFieldInputPlaceholder__organizationName")}),P=(0,d.Yp)("slug","",{type:"text",label:(0,o.localizationKeys)("formFieldLabel__organizationSlug"),placeholder:(0,o.localizationKeys)("formFieldInputPlaceholder__organizationSlug")}),F=!!B.value||!!s,y=()=>{_(),"modal"===C&&b()},R=e=>{P.setValue(e)};return(0,n.BX)(r.en,{...S.props,children:[(0,n.tZ)(l.ContentPage,{Breadcrumbs:null,headerTitle:e,sx:e=>({minHeight:e.sizes.$60}),children:(0,n.BX)(l.Form.Root,{onSubmit:async e=>{if(e.preventDefault(),F&&p)try{const e=await v({name:B.value,slug:P.value});if(s&&await e.setLogo({file:s}),await z({organization:e}),null!=Z?Z:1===e.maxAllowedMemberships)return y();S.nextStep()}catch(e){(0,d.S3)(e,[B,P],i.setError)}},children:[(0,n.tZ)(h.D,{organization:{name:B.value},onAvatarChange:async e=>await f(e),onAvatarRemove:s?()=>(i.setIdle(),f(null)):null}),(0,n.tZ)(l.Form.ControlRow,{elementId:B.id,children:(0,n.tZ)(l.Form.Control,{sx:{flexBasis:"80%"},autoFocus:!0,...B.props,onChange:e=>{B.setValue(e.target.value),R((0,d.qi)(e.target.value))},required:!0})}),(0,n.tZ)(l.Form.ControlRow,{elementId:P.id,children:(0,n.tZ)(l.Form.Control,{sx:{flexBasis:"80%"},...P.props,onChange:e=>{R(e.target.value)},icon:u.Zc,required:!0})}),(0,n.BX)(l.FormButtonContainer,{children:[(0,n.tZ)(l.Form.SubmitButton,{block:!1,isDisabled:!F,localizationKey:(0,o.localizationKeys)("createOrganization.formButtonSubmit")}),"modal"===C&&(0,n.tZ)(l.Form.ResetButton,{localizationKey:(0,o.localizationKeys)("userProfile.formButtonReset"),block:!1,onClick:b})]})]})}),(0,n.tZ)(l.ContentPage,{Breadcrumbs:null,headerTitle:t,sx:e=>({minHeight:e.sizes.$60}),children:x&&(0,n.tZ)(m.l,{organization:x,resetButtonLabel:(0,o.localizationKeys)("createOrganization.invitePage.formButtonReset"),onSuccess:S.nextStep,onReset:y})}),(0,n.tZ)(l.SuccessPage,{title:e,contents:(0,n.tZ)(g.a,{}),sx:e=>({minHeight:e.sizes.$60}),onFinish:y})]})})),v=(0,a.withCoreUserGuard)((()=>(0,n.tZ)(l.ProfileCard,{sx:e=>({width:e.sizes.$120}),children:(0,n.tZ)(l.ProfileCardContent,{children:(0,n.tZ)(f,{})})}))),p=(0,r.pK)((0,l.withCardStateProvider)((()=>(0,n.tZ)(o.Flow.Root,{flow:"createOrganization",children:(0,n.tZ)(o.Flow.Part,{children:(0,n.tZ)(s.Switch,{children:(0,n.tZ)(s.Route,{children:(0,n.tZ)(v,{})})})})}))),"CreateOrganization",{mode:"redirect"}),z=e=>{const t={...e,routing:"virtual",componentName:"CreateOrganization",mode:"modal"};return(0,n.tZ)(s.Route,{path:"createOrganization",children:(0,n.tZ)(a.ComponentContext.Provider,{value:t,children:(0,n.tZ)("div",{children:(0,n.tZ)(p,{})})})})}},4095:function(e,t,i){i.d(t,{l:function(){return m}});var n=i(2903),r=i(4438),a=i(2784),o=i(3476),l=i(5064),s=i(4334),c=i(3736),u=i(7135);const d=e=>/^\S+@\S+\.\S+$/.test(e),m=e=>{var t,i;const{navigate:m}=(0,c.useRouter)(),{onSuccess:g,onReset:h=(()=>m("..")),resetButtonLabel:f,organization:v}=e,p=(0,l.useCardState)(),{t:z}=(0,s.zJ)(),[b,C]=a.useState(!1),[_,Z]=a.useState([]);if(!v)return null;const x=[{label:z((0,u.JD)("admin")),value:"admin"},{label:z((0,u.JD)("basic_member")),value:"basic_member"}],S=(0,u.Yp)("emailAddress","",{type:"text",label:(0,s.u1)("formFieldLabel__emailAddresses")}),{props:{enableErrorAfterBlur:B,errorText:P,hasLostFocus:F,isFocused:y,setError:R,setWarning:w,setSuccessful:O,successfulText:T,warningText:K,...$}}=S,k=(0,u.Yp)("role","basic_member",{options:x,label:"Role",placeholder:""});a.useEffect((()=>{if(_.length){const e=new Set(_),t=S.value.split(",");S.setValue(t.filter((t=>!e.has(t))).join(","))}}),[_]);const A=!!S.value.length||b;return(0,n.BX)(n.HY,{children:[!!_.length&&(0,n.tZ)(l.Alert,{variant:"danger",align:"start",title:(0,s.u1)("organizationProfile.invitePage.detailsTitle__inviteFailed"),subtitle:_.join(", "),sx:{border:0}}),(0,n.BX)(l.Form.Root,{onSubmit:async e=>(e.preventDefault(),v.inviteMembers({emailAddresses:S.value.split(","),role:k.value}).then(g).catch((e=>{var t;if(e instanceof r.gO){const i=(null===(t=e.errors[0].meta)||void 0===t?void 0:t.emailAddresses)||[];i.length?Z(i):(Z([]),(0,u.S3)(e,[],p.setError))}}))),children:[(0,n.tZ)(l.Form.ControlRow,{elementId:S.id,children:(0,n.BX)(o.Flex,{direction:"col",gap:2,sx:{width:"100%"},children:[(0,n.tZ)(o.Text,{localizationKey:(0,s.u1)("formFieldLabel__emailAddresses")}),(0,n.tZ)(o.Text,{localizationKey:(0,s.u1)("formFieldInputPlaceholder__emailAddresses"),colorScheme:"neutral",sx:e=>({fontSize:e.fontSizes.$xs})}),(0,n.tZ)(l.TagInput,{...$,autoFocus:!0,validate:d,sx:{width:"100%"},validateUnsubmittedEmail:e=>C(d(e))})]})}),(0,n.tZ)(l.Form.ControlRow,{elementId:k.id,children:(0,n.BX)(o.Flex,{direction:"col",gap:2,children:[(0,n.tZ)(o.Text,{localizationKey:(0,s.u1)("formFieldLabel__role")}),(0,n.BX)(l.Select,{elementId:"role",...k.props,onChange:e=>k.setValue(e.value),children:[(0,n.tZ)(l.SelectButton,{sx:e=>({width:e.sizes.$48,justifyContent:"space-between",display:"flex"}),children:null===(i=null===(t=k.props.options)||void 0===t?void 0:t.find((e=>e.value===k.value)))||void 0===i?void 0:i.label}),(0,n.tZ)(l.SelectOptionList,{sx:e=>({minWidth:e.sizes.$48})})]})]})}),(0,n.BX)(l.FormButtonContainer,{children:[(0,n.tZ)(l.Form.SubmitButton,{block:!1,isDisabled:!A,localizationKey:(0,s.u1)("organizationProfile.invitePage.formButtonPrimary__continue")}),(0,n.tZ)(l.Form.ResetButton,{localizationKey:f||(0,s.u1)("userProfile.formButtonReset"),block:!1,onClick:h})]})]})]})}},2848:function(e,t,i){i.d(t,{a:function(){return f},F:function(){return h}});var n=i(2903),r=i(3979),a=i(8147),o=i(2425),l=i(3476),s=i(5064),c=i(3033),u=i(3736);const d=({__unstable_manageBillingUrl:e,__unstable_manageBillingMembersLimit:t})=>{const i=(0,u.useRouter)();return(0,n.BX)(l.Flex,{sx:e=>({background:e.colors.$blackAlpha50,padding:e.space.$4,borderRadius:e.radii.$md}),children:[(0,n.tZ)(l.AlertIcon,{variant:"warning",colorScheme:"danger",sx:e=>({marginTop:e.space.$1})}),(0,n.BX)(l.Text,{variant:"regularRegular",sx:e=>({fontWeight:e.fontWeights.$normal,lineHeight:e.lineHeights.$tall}),children:["This organization is limited to ",(0,r.OR)(t)," members.",(0,n.tZ)("br",{}),(0,n.tZ)(l.Link,{variant:"regularRegular",sx:e=>({alignSelf:"flex-start",color:e.colors.$primary500,fontWeight:e.fontWeights.$normal}),onClick:()=>i.navigate((0,r.OR)(e)),children:"Upgrade for unlimited members"})]})]})};var m=i(4095),g=i(2609);const h=(0,s.withCardStateProvider)((()=>{const e=(0,l.localizationKeys)("organizationProfile.invitePage.title"),t=(0,l.localizationKeys)("organizationProfile.invitePage.subtitle"),i=(0,s.useCardState)(),c=(0,a.a2)({onNextStep:()=>i.setError(void 0)}),{organization:u}=(0,o.useCoreOrganization)(),{__unstable_manageBillingUrl:h,__unstable_manageBillingMembersLimit:v}=(0,o.useOrganizationProfileContext)();if(!u)return null;const p=!!v&&(0,r.OR)(v)<=u.pendingInvitationsCount+u.membersCount;return(0,n.BX)(a.en,{...c.props,children:[(0,n.BX)(s.ContentPage,{headerTitle:e,headerSubtitle:t,Breadcrumbs:g.G,children:[p&&h&&(0,n.tZ)(d,{__unstable_manageBillingUrl:h,__unstable_manageBillingMembersLimit:v}),(0,n.tZ)(m.l,{organization:u,onSuccess:c.nextStep})]}),(0,n.tZ)(s.SuccessPage,{title:e,contents:(0,n.tZ)(f,{}),Breadcrumbs:g.G})]})})),f=()=>(0,n.BX)(l.Flex,{direction:"col",center:!0,gap:4,children:[(0,n.tZ)(s.IconCircle,{boxElementDescriptor:l.descriptors.invitationsSentIconBox,iconElementDescriptor:l.descriptors.invitationsSentIcon,icon:c.GT}),(0,n.tZ)(l.Text,{localizationKey:(0,l.localizationKeys)("organizationProfile.invitePage.successMessage")})]})},6884:function(e,t,i){i.d(t,{D:function(){return o}});var n=i(2903),r=i(5064),a=i(4334);const o=e=>{const{organization:t,...i}=e;return(0,n.tZ)(r.AvatarUploader,{...i,title:(0,a.u1)("userProfile.profilePage.imageFormTitle"),avatarPreview:(0,n.tZ)(r.OrganizationAvatar,{size:e=>e.sizes.$11,...t})})}},2609:function(e,t,i){i.d(t,{G:function(){return d},M:function(){return c}});var n=i(2903),r=(i(2784),i(2425)),a=i(5064),o=i(3033),l=i(4334);const s=[{name:(0,l.u1)("organizationProfile.start.headerTitle__members"),id:"members",icon:o.n5,path:"/"},{name:(0,l.u1)("organizationProfile.start.headerTitle__settings"),id:"settings",icon:o.tc,path:"organization-settings"}],c=e=>{const{organization:t}=(0,r.useCoreOrganization)();return t?(0,n.BX)(a.NavbarContextProvider,{children:[(0,n.tZ)(a.NavBar,{header:(0,n.tZ)(a.OrganizationPreview,{size:"sm",organization:t,sx:e=>({margin:`0 0 ${e.space.$4} ${e.space.$2}`})}),routes:s,contentRef:e.contentRef}),e.children]}):null},u={"invite-members":s.find((e=>"members"===e.id)),profile:s.find((e=>"settings"===e.id)),leave:s.find((e=>"settings"===e.id))},d=e=>(0,n.tZ)(a.Breadcrumbs,{...e,pageToRootNavbarRoute:u})},4781:function(e,t,i){i.d(t,{v:function(){return n}});const n=({signUp:e,verifyEmailPath:t,verifyPhonePath:i,navigate:n,handleComplete:r,redirectUrl:a="",redirectUrlComplete:o=""})=>{var l,s;if("complete"===e.status)return r&&r();if("missing_requirements"===e.status){if(e.missingFields.some((e=>"saml"===e)))return e.authenticateWithRedirect({strategy:"saml",redirectUrl:a,redirectUrlComplete:o,continueSignUp:!0});if((null===(l=e.unverifiedFields)||void 0===l?void 0:l.includes("email_address"))&&t)return n(t);if((null===(s=e.unverifiedFields)||void 0===s?void 0:s.includes("phone_number"))&&i)return n(i)}}}}]);