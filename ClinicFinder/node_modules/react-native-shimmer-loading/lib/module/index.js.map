{"version":3,"sources":["index.tsx"],"names":["React","useEffect","StyleSheet","View","Animated","Easing","interpolate","useAnimatedStyle","useSharedValue","withRepeat","withTiming","withPause","getOutputRange","width","isReversed","ShimmerPlaceholder","memo","props","reverseLoop","animatedValue","paused","visible","value","duration","easing","ease","BasedShimmerPlaceholder","shimmerColors","location","style","contentStyle","shimmerStyle","LinearGradient","children","shimmerWidthPercent","containerProps","shimmerContainerProps","childrenContainerProps","parseFloat","animatedStyle","linearTranslate","transform","translateX","styles","container","height","opacity","shimmer","backgroundColor","flex","x","y","create","overflow"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { StyleSheet, View, ViewProps, ViewStyle } from \"react-native\";\nimport Animated, { Easing, interpolate, useAnimatedStyle, useSharedValue, withRepeat, withTiming } from \"react-native-reanimated\";\nimport { withPause } from \"react-native-redash\";\n\ninterface IProps {\n    reverseLoop?: boolean;\n    style?: ViewStyle;\n    contentStyle?: ViewStyle;\n    shimmerStyle?: ViewStyle;\n    shimmerColors?: string[];\n    isReversed?: boolean;\n    visible: boolean;\n    location?: number[];\n    LinearGradient: any;\n    children: React.ReactChildren | React.ReactChild;\n    shimmerWidthPercent?: number;\n    containerProps?: ViewProps;\n    shimmerContainerProps?: ViewProps;\n    childrenContainerProps?: ViewProps;\n}\n\nconst getOutputRange = (width: number, isReversed: boolean) => {\n    'worklet';\n    return isReversed ? [width, -width] : [-width, width];\n}\n\nconst ShimmerPlaceholder = React.memo((props: IProps) => {\n    const { reverseLoop = true } = props;\n    const animatedValue = useSharedValue<number>(-1);\n    const paused = useSharedValue(props.visible);\n\n    useEffect(() => {\n        paused.value = props.visible;\n    }, [props.visible, paused]);\n\n    useEffect(() => {\n        animatedValue.value = -1;\n        animatedValue.value = withPause(\n            withRepeat(\n                withTiming(1,\n                    {\n                        duration: 1000,\n                        easing: Easing.ease\n                    }\n                ),\n                -1,\n                reverseLoop\n            ),\n            paused\n        );\n    }, [animatedValue, paused, reverseLoop]);\n\n    return (\n        <BasedShimmerPlaceholder\n            {...props}\n            animatedValue={animatedValue}\n        />\n    );\n});\n\ninterface IBasedProps extends IProps {\n    animatedValue: Animated.SharedValue<number | null>\n}\n\nconst BasedShimmerPlaceholder = (props: IBasedProps) => {\n    const {\n        shimmerColors = [\"#ebebeb\", \"#c5c5c5\", \"#ebebeb\"],\n        isReversed = false,\n        visible,\n        location = [0.3, 0.5, 0.7],\n        style,\n        contentStyle,\n        shimmerStyle,\n        LinearGradient = View,\n        children,\n        animatedValue,\n        shimmerWidthPercent = 1,\n        containerProps,\n        shimmerContainerProps,\n        childrenContainerProps,\n    } = props;\n\n    const width = parseFloat(`${shimmerStyle?.width ?? 0}`);\n\n    const animatedStyle = useAnimatedStyle(() => {\n        const linearTranslate = interpolate(\n            animatedValue.value ?? -1,\n            [-1, 1],\n            getOutputRange(width, isReversed),\n        );\n        return {\n            transform: [\n                { translateX: linearTranslate }\n            ]\n        }\n    });\n\n\n\n    return (\n        <View\n            style={[\n                styles.container,\n                !visible && shimmerStyle,\n                style,\n            ]}\n            {...containerProps}\n        >\n            {/* Force render children to restrict rendering twice */}\n            <View\n                style={[\n                    !visible && { width: 0, height: 0, opacity: 0 },\n                    visible && contentStyle,\n                ]}\n                {...childrenContainerProps}\n            >\n                {children}\n            </View>\n            {!visible && (\n                <View\n                    style={[styles.shimmer, { backgroundColor: shimmerColors[0] }]}\n                    {...shimmerContainerProps}\n                >\n                    <Animated.View\n                        style={[styles.shimmer, animatedStyle]}\n                    >\n                        <LinearGradient\n                            colors={shimmerColors}\n                            style={{ flex: 1, width: width * shimmerWidthPercent }}\n                            start={{\n                                x: -1,\n                                y: 0.5,\n                            }}\n                            end={{\n                                x: 2,\n                                y: 0.5,\n                            }}\n                            locations={location}\n                        />\n                    </Animated.View>\n                </View>\n            )}\n        </View>\n    );\n};\n\nconst styles = StyleSheet.create({\n    container: {\n        overflow: \"hidden\",\n    },\n    shimmer: {\n        flex: 1,\n    }\n});\n\nexport default ShimmerPlaceholder;\n"]}